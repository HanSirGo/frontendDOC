## ECMAScript2019

![1712383210402](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1712383210402.png)

### 1. trimStart() å’Œ trimEnd()

åœ¨ES10ä¹‹å‰ï¼ŒJavaScriptæä¾›äº†trim()æ–¹æ³•ï¼Œç”¨äºç§»é™¤å­—ç¬¦ä¸²é¦–å°¾ç©ºç™½ç¬¦ã€‚åœ¨ES9ä¸­æå‡ºäº†trimStart()å’ŒtrimEnd() æ–¹æ³•ç”¨äºç§»é™¤å­—ç¬¦ä¸²é¦–å°¾çš„å¤´å°¾ç©ºç™½ç¬¦ï¼Œç©ºç™½ç¬¦åŒ…æ‹¬ï¼šç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ tabã€æ¢è¡Œç¬¦ç­‰å…¶ä»–ç©ºç™½ç¬¦ç­‰ã€‚

#### ï¼ˆ1ï¼‰trimStart()

trimStart() æ–¹æ³•çš„çš„è¡Œä¸ºä¸`trim()`ä¸€è‡´ï¼Œä¸è¿‡ä¼šè¿”å›ä¸€ä¸ª**ä»åŸå§‹å­—ç¬¦ä¸²çš„å¼€å¤´åˆ é™¤äº†ç©ºç™½çš„æ–°å­—ç¬¦ä¸²**ï¼Œä¸ä¼šä¿®æ”¹åŸå§‹å­—ç¬¦ä¸²ï¼š

```js
const s = '  abc  ';
s.trimStart()   // "abc  "
```

`trimStart()` æ–¹æ³•ç”¨æ¥åˆ é™¤å­—ç¬¦ä¸²çš„å¼€å¤´çš„ç©ºç™½å­—ç¬¦ã€‚

`trimLeft()` æ˜¯å®ƒçš„åˆ«åã€‚

#### ï¼ˆ2ï¼‰trimEnd()

trimEnd() æ–¹æ³•çš„çš„è¡Œä¸ºä¸`trim()`ä¸€è‡´ï¼Œä¸è¿‡ä¼šè¿”å›ä¸€ä¸ª**ä»åŸå§‹å­—ç¬¦ä¸²çš„ç»“å°¾åˆ é™¤äº†ç©ºç™½çš„æ–°å­—ç¬¦ä¸²**ï¼Œä¸ä¼šä¿®æ”¹åŸå§‹å­—ç¬¦ä¸²ï¼š

```js
const s = '  abc  ';
s.trimEnd()   // "  abc"
```

æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¸é€‚ç”¨äºnullã€undefinedã€Numberç±»å‹ã€‚

`trimEnd()` æ–¹æ³•ç”¨æ¥åˆ é™¤å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºç™½å­—ç¬¦ã€‚`trimRight()` æ˜¯å®ƒçš„åˆ«å

### 2. flat()å’ŒflatMap()

#### ï¼ˆ1ï¼‰flat()

åœ¨ES2019ä¸­ï¼Œflat()æ–¹æ³•ç”¨äºåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œè¿™ä¸ªæ–°æ•°ç»„åŒ…å«ä¸å®ƒè°ƒç”¨flat()çš„æ•°ç»„ç›¸åŒçš„å…ƒç´ ï¼Œåªä¸è¿‡å…¶ä¸­ä»»ä½•æœ¬èº«ä¹Ÿæ˜¯æ•°ç»„çš„å…ƒç´ ä¼šè¢«æ‰“å¹³å¡«å……åˆ°è¿”å›çš„æ•°ç»„ä¸­ï¼š

```js
[1, [2, 3]].flat()        // [1, 2, 3]
[1, [2, [3, 4]]].flat()   // [1, 2, [3, 4]]
[1, [2, [3, 4]]].flat(Infinity);  // [1, 2, 3, 4]
```

åœ¨ä¸ä¼ å‚æ•°æ—¶ï¼Œflat()é»˜è®¤åªä¼šæ‰“å¹³ä¸€çº§åµŒå¥—ï¼Œå¦‚æœæƒ³è¦æ‰“å¹³æ›´å¤šçš„å±‚çº§ï¼Œå°±éœ€è¦ä¼ ç»™flat()ä¸€ä¸ªæ•°å€¼å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°è¡¨ç¤ºè¦æ‰“å¹³çš„å±‚çº§æ•°ï¼š

```js
[1, [2, [3, 4]]].flat(2)  // [1, 2, 3, 4]
```

å¦‚æœæ•°ç»„ä¸­å­˜åœ¨ç©ºé¡¹ï¼Œä¼šç›´æ¥è·³è¿‡ï¼š

- `flat()`ä¼šç§»é™¤æ•°ç»„ä¸­çš„ç©ºé¡¹

```js
[1, [2, , 3]].flat());    //  [1, 2, 3]
```

å¦‚æœä¼ å…¥çš„å‚æ•°å°äºç­‰äº0ï¼Œå°±ä¼šè¿”å›åŸæ•°ç»„ï¼š

```js
[1, [2, [3, [4, 5]]]].flat(0);    //  [1, [2, [3, [4, 5]]]]
[1, [2, [3, [4, 5]]]].flat(-10);  //  [1, [2, [3, [4, 5]]]]
```

#### ï¼ˆ2ï¼‰flatMap()

flatMap()æ–¹æ³•ä½¿ç”¨æ˜ å°„å‡½æ•°æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åå°†ç»“æœå‹ç¼©æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚å®ƒä¸ map å’Œè¿ç€æ·±åº¦å€¼ä¸º1çš„ flat å‡ ä¹ç›¸åŒï¼Œä½† flatMap é€šå¸¸åœ¨åˆå¹¶æˆä¸€ç§æ–¹æ³•çš„æ•ˆç‡ç¨å¾®é«˜ä¸€äº›ã€‚è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å›è°ƒå‡½æ•°çš„ç»“æœï¼Œå¹¶ä¸”ç»“æ„æ·±åº¦ depth å€¼ä¸º1ã€‚

```
arr.flatMap(function callback(currentVal[, index[, array]]) {}[, thisArg])
```

- callback: å¯ä»¥ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„æ‰€è°ƒç”¨çš„å‡½æ•°

- - currentVal: å½“å‰æ•°ç»„åœ¨å¤„ç†çš„å…ƒç´ 
  - index: å¯é€‰ï¼Œæ­£åœ¨å¤„ç†çš„å…ƒç´ ç´¢å¼•
  - array: å¯é€‰ï¼Œè¢«è°ƒç”¨çš„æ•°ç»„

- thisArg: æ‰§è¡Œcallbackå‡½æ•°æ—¶ä½¿ç”¨çš„thiså€¼

```js
[1, 2, 3, 4].flatMap(x => x * 2);      //  [2, 4, 6, 8]
[1, 2, 3, 4].flatMap(x => [x * 2]);    //  [2, 4, 6, 8]

[1, 2, 3, 4].flatMap(x => [[x * 2]]);  //  [[2], [4], [6], [8]]
[1, 2, 3, 4].map(x => [x * 2]);        //  [[2], [4], [6], [8]]
```

### 3. Object.fromEntries()

Object.fromEntries()æ–¹æ³•å¯ä»¥æŠŠé”®å€¼å¯¹åˆ—è¡¨è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚è¯¥æ–¹æ³•ç›¸å½“äº Object.entries() æ–¹æ³•çš„é€†è¿‡ç¨‹ã€‚Object.entries()æ–¹æ³•è¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡è‡ªèº«å¯æšä¸¾å±æ€§çš„é”®å€¼å¯¹æ•°ç»„ï¼Œè€ŒObject.fromEntries() æ–¹æ³•æŠŠé”®å€¼å¯¹åˆ—è¡¨è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚

```
Object.fromEntries(iterable)
```

- iterable: Arrayã€Mapç­‰å¯è¿­ä»£å¯¹è±¡

```js
const object = { key1: 'value1', key2: 'value2' }
 
const array = Object.entries(object)  // [ ["key1", "value1"], ["key2", "value2"] ]
 
 
Object.fromEntries(array)             // { key1: 'value1', key2: 'value2' }
```

ä½¿ç”¨è¯¥æ–¹æ³•ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªç”¨é€”ï¼š

#### ï¼ˆ1ï¼‰å°†æ•°ç»„è½¬æˆå¯¹è±¡

```js
const entries = [
  ['foo', 'bar'],
  ['baz', 42]
]
Object.fromEntries(entries)  //  { foo: "bar", baz: 42 }
```

#### ï¼ˆ2ï¼‰å°† Map è½¬æˆå¯¹è±¡

```js
const entries = new Map([
  ['foo', 'bar'],
  ['baz', 42]
])
Object.fromEntries(entries)  //  { foo: "bar", baz: 42 }
```

### 4. Symbolæè¿°

é€šè¿‡ Symbol() åˆ›å»ºç¬¦å·æ—¶ï¼Œå¯ä»¥é€šè¿‡å‚æ•°æä¾›å­—ç¬¦ä¸²ä½œä¸ºæè¿°ï¼š

```js
let dog = Symbol("dog");  // dog ä¸ºæè¿° 
```

åœ¨ ES2019 ä¹‹å‰ï¼Œè·å–ä¸€ä¸ª Symbol å€¼çš„æè¿°éœ€è¦é€šè¿‡ String æ–¹æ³• æˆ– toString æ–¹æ³•ï¼š

```js
String(dog);              // "Symbol(dog)" dog.toString();           // "Symbol(dog)" 
```

ES2019 è¡¥å……äº†å±æ€§ descriptionï¼Œç”¨æ¥ç›´æ¥è®¿é—®**æè¿°**ï¼š

```js
dog.description;  // dog
```

```js
# è¯­æ³•
Symbol('myDescription').description;
Symbol.iterator.description;
Symbol.for('foo').description;

// eg:
Symbol('foo').description;      // 'foo'
Symbol().description;           // undefined
Symbol.for('foo').description;  // 'foo'
```

### 5. toString()

ES2019 å¯¹å‡½æ•°çš„ toString() æ–¹æ³•è¿›è¡Œäº†æ‰©å±•ï¼Œä»¥å‰è¿™ä¸ªæ–¹æ³•åªä¼šè¾“å‡ºå‡½æ•°ä»£ç ï¼Œä½†ä¼šçœç•¥æ³¨é‡Šå’Œç©ºæ ¼ã€‚ES2019 çš„ toString()åˆ™ä¼šä¿ç•™æ³¨é‡Šã€ç©ºæ ¼ç­‰ï¼Œå³è¾“å‡ºçš„æ˜¯åŸå§‹ä»£ç ï¼š

```js
function sayHi() {
  /* dog */
  console.log('wangwang');
}

sayHi.toString();  // å°†è¾“å‡ºå’Œä¸Šé¢ä¸€æ ·çš„åŸå§‹ä»£ç 
```

**ä¿®è®¢ `Function.prototype.toString()`**

ä»¥å‰çš„ toString æ–¹æ³•æ¥è‡ª `Object.prototype.toString()`ï¼Œç°åœ¨ çš„ `Function.prototype.toString()` æ–¹æ³•è¿”å›ä¸€ä¸ªè¡¨ç¤ºå½“å‰å‡½æ•°æºä»£ç çš„å­—ç¬¦ä¸²ã€‚ä»¥å‰åªä¼šè¿”å›è¿™ä¸ªå‡½æ•°ï¼Œä¸ä¼šåŒ…å«ç©ºæ ¼ã€æ³¨é‡Šç­‰ã€‚

```js
function foo() {
    // es10æ–°ç‰¹æ€§
    console.log('imooc')
}
console.log(foo.toString());
// function foo() {
//     // es10æ–°ç‰¹æ€§
//     console.log('imooc')
// }
```

### 6. catch

`Optional catch binding`

å¯é€‰çš„æ•è·ç»‘å®šï¼Œå…è®¸çœç•¥catchç»‘å®šå’Œå®ƒåé¢çš„åœ†æ‹¬å·

åœ¨ ES2019 ä»¥å‰ï¼Œcatch ä¼šå¸¦æœ‰å‚æ•°ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ catch å—æ˜¯å¤šä½™çš„ã€‚è€Œç°åœ¨å¯ä»¥ä¸å¸¦å‚æ•°ï¼š

```js
// ES2019 ä¹‹å‰
try {
   ...
} catch(error) {
   ...
}

// ES2019 ä¹‹å
try {
   ...
} catch {
   ...
}
```

### 7.`JSON.stringify()` çš„å¢å¼ºåŠ›

`JSON.stringify()` åœ¨ ES10 ä¿®å¤äº†å¯¹äºä¸€äº›è¶…å‡ºèŒƒå›´çš„ Unicode å±•ç¤ºé”™è¯¯çš„é—®é¢˜ï¼Œæ‰€ä»¥é‡åˆ° 0xD800-0xDFF ä¹‹å†…çš„å­—ç¬¦ä¼šå› ä¸ºæ— æ³•ç¼–ç æˆ UTF-8 è¿›è€Œå¯¼è‡´æ˜¾ç¤ºé”™è¯¯ã€‚åœ¨ ES10 å®ƒä¼šç”¨è½¬ä¹‰å­—ç¬¦çš„æ–¹å¼æ¥å¤„ç†è¿™éƒ¨åˆ†å­—ç¬¦è€Œéç¼–ç çš„æ–¹å¼ï¼Œè¿™æ ·å°±ä¼šæ­£å¸¸æ˜¾ç¤ºäº†ã€‚

```
JSON.stringify('ğŸ˜Š'); // '"ğŸ˜Š"'
```